<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Questionnair Editor</title>
    <link rel="stylesheet" href="style.css">
	<!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet"> -->
	
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>

<link rel="stylesheet" href="https://unpkg.com/element-ui/lib/theme-chalk/index.css">
<!-- import JavaScript -->
<script src="https://unpkg.com/element-ui/lib/index.js"></script>

	<script src="Model.js"></script>
    <script src="companents/GroupCompanent.js"></script>
	<script src="companents/QuestionCompanent.js"></script>
	<script src="companents/AnswerRangeCompanent.js"></script>
	<script src="companents/AnswerNumberCompanent.js"></script>
	<script src="companents/AnswerTextCompanent.js"></script>
	<script src="companents/AnswerListCompanent.js"></script>
	
</head>
<body>
<div id="app">
    <q-group :orig-name="title" :orig-collection="collection" :id="0"/>
</div>

<template id="group">
	<section>
	<header>
		<el-row class="title"> 
			<!-- <button class="close" @click="open = !open">
				<span v-if="open">_</span>
				<span v-else="">></span>
			</button> -->
			<input class="input-group" v-model="name"/>
		</el-row>
		<el-button circle icon="el-icon-close" class="minus" @click="askDelMyself"/>
	</header>
    <el-collapse v-model="activeNames" class="group-content">
        <!-- <el-collapse-item class="content" v-if="true"> -->
		<el-collapse-item v-for="(item, index)  in collection" 
			:title = "item.type + ' ' + (index + 1)"
			:name = "index"
			:key="(gIndex +'-'+ index)"
			:class="item.type">
			<q-group
				v-if="item.type=='group'"
				:orig-name="item.name"
				:orig-collection="item.collection"
				:g-index="index"
				:id="(gIndex +'-'+ index)"
				v-on:delgroup="deleteFromCollection">
			</q-group>
			<question v-else="" 
				class="question"
				:index="index"
				:question-data="item" 
				v-on:delqustion="deleteFromCollection">
			</question>
		</el-collapse-item>
        <!-- </el-collapse>	 -->
    </el-collapse>
	<footer>
		<el-button  icon="el-icon-edit-outline" class="plusQ" @click="addQuestion">Добавить Вопрос</el-button>
		<el-button  icon="el-icon-menu" class="plus" @click="addGroup">Добавить Раздел</el-button>
	</footer>
    </section>
</template>


<template id="question">
    <div class="question-content">
        <header>
            <textarea class="input-question" v-model="text"></textarea>
            <el-button circle icon="el-icon-close" class="minus" @click="askDelMyself"/>
		</header>
		<el-select v-model="answerType" placeholder="Тип Ответа">
			<el-option v-for="(lable, key) in answerTypeLables" :value="key" :key="key">{{ lable }}</el-option>
		</el-select>

		<div class="answerForm">
			<component v-bind:is="currentAnswerComponent" :data="answerForm"></component>
		</div>
    </div>
</template>

<template id="answer-type-number">
	<div class="answer-type number">
		<el-input-number  class="input-number" v-model="value">
	</div>
</template>

<template id="answer-type-text">
	<div class="answer-type text">
		<el-input placeholder="Введите ответ" v-model="value"></el-input>
	</div>
</template>

<template id="answer-type-list">
	<div class="answer-type list">
		<ul>
			<li v-for="item in list">
				<component v-bind:is="currentAnswerComponent" :data="item"></component>
			</li>
		</ul>
	</div>
</template>

<template id="answer-type-range">
	<el-row class="answer-type-range" type="flex" :gutter="20">
		<el-col >с
			<el-input-number :key="1" class="input-number" v-model="min">
				
			</el-input-number>
		</el-col>
		<el-col >по
			<el-input-number :key="2" class="input-number" v-model="max">
				
			</el-input-number>
		</el-col>
		<el-col>шаг
			<el-input-number :key="3" class="input-number" v-model="step">
				
			</el-input-number>
		</el-col>
	</el-row>
</template>



<script type="text/javascript">
	
	var vm = new Vue({
		el:   '#app',
		data: {
			title:      'АНКЕТА',
			collection: [
				{
					type:       "group",
					name:       'GROUP 1',
					collection: [{
						type: "question",
						text: "как тебя зовут?",
						answerForm:{
							type: "list",
							contentType: "text",
							multyple: false,
							list: [
								{
									type: "text",
									value: "лабудень 1"
								},
								{
									type: "text",
									value: "лабудень 2"
								},
								{
									type: "text",
									value: "лабудень 3"
								}
							],
							
						}
					}]
				}
				
			]
		}
	})

</script>
</body>
</html>
